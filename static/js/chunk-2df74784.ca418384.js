(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2df74784"],{"0ef1":function(t,e,n){},4700:function(t,e,n){"use strict";var o=n("e21f"),i=n.n(o);i.a},5669:function(t){t.exports={"+1":"👍","-1":"👎",laugh:"😄",hooray:"🎉",rocket:"🚀",confused:"😕",heart:"❤️",eyes:"👀"}},"5f12":function(t,e,n){"use strict";var o=n("87d1"),i=n.n(o);i.a},"657f":function(t,e,n){},"65f4":function(t,e,n){"use strict";var o=n("657f"),i=n.n(o);i.a},8657:function(t,e,n){"use strict";var o=n("ae26"),i=n.n(o);i.a},"87d1":function(t,e,n){},"8d84":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-backtop",{attrs:{bottom:260,right:0}}),t._v(" "),t.blogVal?[n("vue-markdown",{staticClass:"dashboard-container markdown-body",attrs:{id:"markdown-content"}},[t._v(t._s(t.blogVal))]),t._v(" "),n("comment",{attrs:{"current-issue":t.currentIssue},on:{commitComment:t.commitComment,sign:t.sign,commitReaction:t.commitReaction}})]:[n("el-alert",{attrs:{title:"未找到数据",type:"info","show-icon":""}})]],2)},i=[],r=n("9ce6"),s=n.n(r),a=n("27ae"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"comment-card"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("评论")]),t._v(" "),t.commenterProfile.avatar_url?n("el-dropdown",{staticStyle:{margin:"auto 0px",float:"right"},attrs:{span:1}},[n("span",{staticClass:"el-dropdown-link"},[n("el-avatar",{attrs:{shape:"square",size:35,src:t.commenterProfile.avatar_url+"?imageView2/1/w/80/h/80"}})],1),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(e){return t.signout(e)}}},[n("span",{staticStyle:{display:"block"}},[t._v("Log Out")])])],1)],1):t._e()],1),t._v(" "),n("div",[n("comment-list",{attrs:{"current-issue":t.currentIssue}}),t._v(" "),n("comment-input",{attrs:{"current-issue":t.currentIssue},on:{commitComment:t.commitComment,sign:t.signin}})],1)])},u=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-container"},[n("markdown-editor",{ref:"markdownEditor",attrs:{language:t.language,options:{hideModeSwitch:!1,previewStyle:"tab"}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),t.avatar?[n("el-row",{staticStyle:{"padding-top":"10px"},attrs:{type:"flex",justify:"space-between"}},[n("el-tag",{attrs:{type:"success"}},[t._v("Styling with Markdown is supported")]),t._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getComment()}}},[t._v("Comment")])],1)],1)]:[n("el-alert",{staticClass:"alter-login",attrs:{title:"Login with GitHub to join this conversation",type:"success","show-icon":"",closable:!1}},[n("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(e){return t.signin()}}},[t._v("Sign in")])],1)]],2)},d=[],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:t.id}})},f=[],h=n("5530"),g=(n("a7be"),n("f513"),n("a0ae")),p=n.n(g),v={minHeight:"auto",language:"en-US",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!0,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},b=(n("f4c3"),{name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return v}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"auto"},language:{type:String,required:!1,default:"en"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var t=Object.assign({},v,this.options);return t.initialEditType=this.mode,t.height=this.height,t.language=this.language,t}},watch:{value:function(t,e){t!==e&&t!==this.editor.getMarkdown()&&this.editor.setValue(t)},language:function(t){this.destroyEditor(),this.initEditor()},height:function(t){this.editor.height(t)},mode:function(t){this.editor.changeMode(t)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){this.editor=new p.a(Object(h["a"])({el:document.getElementById(this.id),initialValue:this.value},this.editorOptions))},destroyEditor:function(){this.editor&&this.editor.remove()},getValue:function(){return this.editor.getMarkdown()},resetValue:function(t){this.editor.reset()}}}),_=b,y=n("2877"),k=Object(y["a"])(_,m,f,!1,null,null,null),w=k.exports,C={name:"CommentInput",components:{MarkdownEditor:w},props:{currentIssue:{type:Object,default:function(){return{}}}},data:function(){return{content:"",languageTypeList:{en:"en",zh:"zh-CN"}}},computed:{avatar:function(){var t=this.$store.getters.commenterToken;return t&&this.$store.dispatch("user/getInfo"),this.$store.getters.avatar},language:function(){return this.languageTypeList[this.$store.getters.language]}},methods:{getComment:function(){var t=this.$refs.markdownEditor.getValue();this.$refs.markdownEditor.resetValue(),console.log("commit issue:",this.currentIssue),this.$emit("commitComment",{issueId:this.currentIssue.number,html:t})},signin:function(){this.$emit("sign","signin")}}},x=C,$=(n("65f4"),Object(y["a"])(x,l,d,!1,null,null,null)),S=$.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.currentIssue?n("el-card",{staticClass:"comment-list-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t.currentIssue.title?[n("span",[t._v(t._s(t.currentIssue.body))])]:[n("el-alert",{attrs:{type:"info",description:"未发现评论，成为第一个留言的人。","show-icon":""}})]],2),t._v(" "),t.currentIssue.comments&&t.currentIssue.comments.length>0?t._l(t.currentIssue.comments,(function(e){return n("div",{key:e.id,staticClass:"box-card-item"},[n("el-row",{staticStyle:{"padding-bottom":"16px"},attrs:{type:"flex"}},[n("el-col",{attrs:{span:2}},[n("el-avatar",{staticClass:"box-avatar",attrs:{shape:"square",size:"large",src:e.user.avatar_url}})],1),t._v(" "),n("el-col",{staticClass:"box-card-border",attrs:{span:22}},[n("el-card",[n("div",{staticClass:"box-card-border__header",attrs:{slot:"header"},slot:"header"},[n("el-link",{attrs:{href:"https://element.eleme.io",target:"_blank"}},[t._v(t._s(e.user.login))]),t._v(" "),n("span",{staticClass:"box-link-span"},[t._v("commented on  "+t._s(t.formatDateTime(e.created_at)))])],1),t._v(" "),n("div",{staticStyle:{"margin-left":"20px"}},[n("vue-markdown",{staticClass:"markdown-body",attrs:{id:"markdown-content"}},[t._v(t._s(e.body))])],1),t._v(" "),n("reaction",{attrs:{id:e.id}})],1)],1)],1)],1)})):t._e()],2):t._e()},I=[],j=n("c1df"),O=n.n(j),M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-top":"20px"}},[n("el-checkbox-group",{model:{value:t.checkboxGroup1,callback:function(e){t.checkboxGroup1=e},expression:"checkboxGroup1"}},t._l(t.reactions,(function(e){return n("el-checkbox-button",{key:e.id,attrs:{label:e.content},on:{change:function(n){return t.handleCheckedChange(n,e)}}},[n("span",{staticClass:"box-image-font"},[t._v(t._s(t.getemoji(e.content)))]),t._v(" "),n("span",{staticClass:"box-image-font"},[t._v(t._s(e.amount))])])})),1)],1)},V=[],R=(n("7514"),n("ac6a"),n("7f7f"),n("c5f6"),n("5669")),L=n("3edf"),q=["上海","北京","广州","深圳"],D={name:"Reaction",props:{id:{type:Number,required:!0,default:0}},data:function(){return{checkboxGroup1:[],cities:q,reactions:[],loading:null}},created:function(){this.initReactions()},methods:{getemoji:function(t){return R[t]},initReactions:function(){var t=this,e=[];for(var n in R)e.push({content:n,user:{login:"",isCurrent:!1},amount:0});Object(L["g"])(this.id).then((function(n){var o="ethan-creed";n.forEach((function(n){var i=e.find((function(t){return t.content===n.content})),r=o===n.user.login;i?i.amount+=1:(i={id:n.id,content:n.content,user:{login:n.user.login,isCurrent:!1},amount:1},e.push(i)),r&&(i.id=n.id,i.user.isCurrent=!0,i.user.login=o,t.checkboxGroup1.push(n.content))})),t.reactions=e}))},handleCheckedChange:function(t,e){var n=this;this.loading=this.$loading({lock:!0,text:"Loading"}),t?(e.amount+=1,Object(L["b"])(this.id,{content:e.content}).then((function(t){var n=t.id,o=t.user;e.id=n,e.user=o})).catch((function(t){n.loading.close(),console.log("addCommentReaction encounter error:",t),n.$message({message:"".concat(n.$t("messgae.unknownError")),type:"error"})})).finally((function(){return n.loading.close()}))):(e.amount-=1,Object(L["e"])(this.id,e.id).then((function(t){})).catch((function(t){n.loading.close(),console.log("deleteCommentReaction encounter error:",t),n.$message({message:"".concat(n.$t("messgae.unknownError")),type:"error"})})).finally((function(){return n.loading.close()})))}}},T=D,z=(n("8657"),Object(y["a"])(T,M,V,!1,null,null,null)),G=z.exports,Y={name:"CommentList",components:{VueMarkdown:s.a,Reaction:G},props:{currentIssue:{type:Object,default:function(){return{}}}},methods:{formatDateTime:function(t){var e=O()(t),n=O()(),o=n.diff(e,"days");return o>5?O()(t).format("YYYY-MM-DD"):O()(t).fromNow()}}},B=Y,H=(n("5f12"),n("9c76"),Object(y["a"])(B,E,I,!1,null,"69785a5e",null)),N=H.exports,P={name:"Comment",components:{CommentInput:S,CommentList:N},props:{currentIssue:{type:Object,default:function(){return{}}}},computed:{commenterProfile:function(){return this.$store.getters.commenterDetails}},methods:{commitComment:function(t){this.$emit("commitComment",t)},signin:function(t){this.$emit("sign",t)},signout:function(){this.$emit("sign","signout")}}},J=P,F=(n("4700"),Object(y["a"])(J,c,u,!1,null,null,null)),U=F.exports,A={name:"Blog",components:{VueMarkdown:s.a,Comment:U},props:{content:{type:String,default:""},currentIssue:{type:Object,default:function(){return{}}}},computed:{blogVal:function(){return this.content?a["Base64"].decode(this.content):""}},methods:{commitComment:function(t){this.$emit("commitComment",t)},sign:function(t){this.$emit("sign",t)},commitReaction:function(t){this.$emit("commitReaction",t)}}},K=A,Q=(n("d3978"),Object(y["a"])(K,o,i,!1,null,"cec9b00e",null));e["a"]=Q.exports},"9c76":function(t,e,n){"use strict";var o=n("fb85"),i=n.n(o);i.a},ae26:function(t,e,n){},d3978:function(t,e,n){"use strict";var o=n("0ef1"),i=n.n(o);i.a},e21f:function(t,e,n){},fb85:function(t,e,n){}}]);